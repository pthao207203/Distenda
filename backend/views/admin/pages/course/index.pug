extend ../../layouts/default.pug
include ../../mixins/box-filter.pug
include ../../mixins/pagination.pug

block main
  h1 Khoá học

  .card.mb-3
      .card-header Bộ lọc và Tìm kiếm
      .card-body
        .row
          .col-4
            +box-filter([
              {
                label: "Tất cả",
                value: ""
              },
              {
                label: "Hoạt động",
                value: "active"
              },
              {
                label: "Dừng hoạt động",
                value: "inactive"
              }
            ])
          .col-8
            include ../../partials/form-search.pug

  .card
      .card-header Danh sách
      .card-body
        .row.mb-3
          .col-6
            //- if(role.permissions.includes("products_edit"))
            //-   form(
            //-     form-change-multi
            //-     data-path=`/${prefixAdmin}/products/change-multi`
            //-   )
            //-     .input-group
            //-       select(name="status" class="form-control")
            //-         option(value="active") Hoạt động
            //-         option(value="inactive") Dừng hoạt động
            //-         option(value="delete") Xóa
            //-       .input-group-append
            //-         button(
            //-           class="btn btn-success"
            //-           type="submit"
            //-         ) Áp dụng
          .col-6.text-right
            //- if(role.permissions.includes("products_create"))
            //-   a(
            //-     href=`/${prefixAdmin}/products/create`
            //-     class="btn btn-outline-success"
            //-   ) + Thêm mới
        table.table.table-hover.table-sm
          thead
            tr
              th
              th STT
              th Tiêu đề
              th Giá
              th Vị trí
              th Trạng thái
              th 

          tbody
            each item, index in courses
              tr 
                td
                  input(
                    type="checkbox"
                    input-change=item.id
                  )
                td #{ index + 1}
                td #{item.CourseName}
                td #{item.CoursePrice}$
                td
                //-   if(role.permissions.includes("products_edit"))
                //-     input(
                //-       type="number"
                //-       value=item.position
                //-       item-id=item.id
                //-       data-path=`/${prefixAdmin}/products/change-position`
                //-       input-position
                //-       style="width: 60px;"
                //-     )
                //-   else
                //-     span #{item.position}
                td
                  if(item.CourseStatus == 1)
                    a( 
                      href="javascript:;"
                      data-status="active"
                      data-id=item.id
                      button-change-status
                      class="badge badge-success"
                    ) Hoạt động
                  else if (item.CourseStatus == 0)
                    a(
                      href="javascript:;"
                      data-status="inactive"
                      data-id=item.id
                      button-change-status
                      class="badge badge-danger"
                    ) Dừng hoạt động
                td
                  a(
                    class="btn btn-info btn-sm"
                    href=`/${prefixAdmin}/products/detail/${item.id}`
                  ) Chi tiết
  +pagination(pagination)

  form(
    action=""
    method="POST"
    id="form-change-status"
    data-path=`${prefixAdmin}/courses/change-status`
    ) 

  script(src="/admin/js/course.js") 